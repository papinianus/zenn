---
title: 'ãƒ‰ãƒ‰ã‚¹ã‚³ãƒ¼ãƒ‰ with Reactive Extensions'
emoji: 'ğŸŠ'
type: 'tech'
topics:
  - 'csharp'
published: true
---

Of [https://twitter.com/Sheeeeepla/status/1554028833942441984](https://twitter.com/Sheeeeepla/status/1554028833942441984)

I thought it was a good idea to write it in Reactive Extensions, but it seems wrong.

```csharp
using System.Reactive.Linq;

var expected = new[] { "ãƒ‰ãƒ‰", "ã‚¹ã‚³", "ã‚¹ã‚³", "ã‚¹ã‚³", "ãƒ‰ãƒ‰", "ã‚¹ã‚³", "ã‚¹ã‚³", "ã‚¹ã‚³", "ãƒ‰ãƒ‰", "ã‚¹ã‚³", "ã‚¹ã‚³", "ã‚¹ã‚³" };
IEnumerable<string> Gen()
{
    var rnd = new Random();
    var words = new[] { "ãƒ‰ãƒ‰", "ã‚¹ã‚³" };
    while (true)
    {
        Thread.Sleep(1000);
        yield return words[rnd.Next(0, 2)];
    }
}
var q = new Queue<string>(Enumerable.Repeat(string.Empty,expected.Length));
var burk = Gen().ToObservable();
burk.TakeUntil(x => {
    q.Dequeue();
    q.Enqueue(x);
    return q.SequenceEqual(expected);
}).Subscribe(Console.WriteLine,ex=>throw ex,()=>Console.WriteLine("ãƒ©ãƒ–æ³¨å…¥â™¡"));
```
