---
title: 'Pleasanter ã§ PyScript'
emoji: 'ğŸŠ'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['pyscript', 'pleasater']
published: false
---

[2022 å€‹äººã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼](https://qiita.com/advent-calendar/2022/papinianus) ã®è¨˜äº‹ã§ã™ã€‚

## ã‚„ã£ã¦ã¿ãŸã‹ã£ãŸã“ã¨

PyScript ã£ã¦ã©ã†ãªã®

## çµè«–

- ã‚‚ã†ã¡ã‚‡ã£ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå……å®Ÿã—ã¦ã»ã—ã„
  - æ¢ã—ã‹ãŸã®å•é¡Œã‹
- Pleasanter ã®ã‚ˆã†ãªæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã«å…¥ã‚Œã¦å¬‰ã—ã„å±€é¢ãŒã‚ã¾ã‚Šæƒ³åƒã¤ã‹ãªã‹ã£ãŸ

## è¨­å®š

Pleasanter ã®æ‹¡å¼µ HTML æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€ãƒ­ãƒ¼ãƒ‰ã¨ã¨ã‚Šã‚ãˆãšã®æ©Ÿèƒ½ã¨ã—ã¦ Repl ã‚’è¨­å®šã™ã‚‹ã«ã¯ã“ã†ã„ã†æ„Ÿã˜ã€‚

- `/web/pleasanter/Implem.Pleasanter/App_Data/Parameters/ExtendedHtmls/HtmlHeaderBottom_ja.html`

```html:HtmlHeaderBottom_ja.html
<link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
<script defer src="https://pyscript.net/latest/pyscript.js"></script>
```

- `/web/pleasanter/Implem.Pleasanter/App_Data/Parameters/ExtendedHtmls/HtmlHeaderBottom_ja.html`

```html:HtmlBodyBottom_ja.html
<py-repl>
    print(1)
</py-repl>
<py-script>
    from js import alert, confirm
    def function():
        print(confirm(Element("Results_Title").element.value))
</py-script>
```

### ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã¨ãã®å‹•ä½œ

![pyscripttop.gif](/images/pyscripttop.gif)

- Pleasanter è‡ªèº«ãã“ã¾ã§æ—©ã„ã‚¢ãƒ—ãƒªã§ã¯ãªã„ãŒã€ãƒ­ãƒ¼ãƒ‰ãŒã‹ãªã‚Šé‡ããªã‚‹
- ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒç™½æŠœãã«ãªã‚Šã€è¦‹ãŸç›®ã¨ã—ã¦ã‚‚ã‚ã¾ã‚Šã‚ˆããªã„
  - ã“ã‚Œã¯ Pleasanter ã‹ jQuery ã®ã‚¹ã‚¿ã‚¤ãƒ«ã®ã›ã„ã‹ã‚‚

## js ã¨ã®é€£æº

å…ˆã® HTML ã«æ—¢ã«æ›¸ã„ã¦ã„ã‚‹ã¨ãŠã‚Šã€js ã¨ã„ã†åã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ã®ã‚ˆã†ã« import ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

é€†ã« js å´ã‹ã‚‰ã¯æ¬¡ã®ã‚ˆã†ã« python ã®é–¢æ•°ã‚’å‘¼ã¹ã‚‹

- ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç®¡ç†ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›å…ˆã¨ã—ã¦"æ–°è¦ä½œæˆ"ã€"ç·¨é›†"ã«ãƒã‚§ãƒƒã‚¯ã‚’ä»˜ã‘ã¦ä½œæˆ

```javascript:edit.js
$p.events.on_editor_load = function () {
 $p.getField("çŠ¶æ³").html("<button id='script' py-click='function()'>â—‹</button>");
}
```

### ç·¨é›†ãƒšãƒ¼ã‚¸ã§ã®å‹•ä½œ

![pyscriptedit.gif](/images/pyscriptedit.gif)

- ã‚¿ã‚¤ãƒˆãƒ«é …ç›®ã®å†…å®¹ã‚’å–å¾—ã§ãã‚‹ã—ã€confirm ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚‚å‡ºã›ã¦ã„ã‚‹ã€‚æœ€ä½é™ã®å‹•ãã¯ã§ãã¦ãã†

## ã¾ã¨ã‚

ã‚‚ã¨ã‚‚ã¨ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ jQuery ã§ script è¦ç´  link è¦ç´ ã‚’ä½œã£ã¦ã‚‚ä¸Šæ‰‹ãå‹•ä½œã›ãšã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’æ§‹ç¯‰ã—ãŸã®ã§è©¦ã—ã¦ã¿ãŸã‹ã£ãŸã¨ã“ã‚ãŒå¤§ãã„ã§ã™ã€‚

- ãƒ—ãƒªã‚¶ãƒ³ã‚¿ãƒ¼ã«ã¯å‘ã„ã¦ãªã•ãã†

è©¦ã—ãŸã¨ã“ã‚ Pleasanter ã§ã¯ã‚ã¾ã‚Šå®Ÿç”¨æ€§ã‚’æ„Ÿã˜ãªã‹ã£ãŸã§ã™ã€‚
ã¨ã„ã†ã®ã¯ Python ã®ä»Šã®æ™®åŠã¯ä¾¿åˆ©ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ”¯ãˆã‚‰ã‚Œã¦ã„ã‚‹ã¨ã“ã‚ãŒå¤§ãã„ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãƒ“ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¨ã‹æ©Ÿæ¢°å­¦ç¿’ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”»é¢ã§ãã®ã¾ã¾å®Ÿç¾ã™ã‚‹è¦è«‹ã®ä¹ã—ã„ Pleasanter ã§ã¯ Python ã®è‰¯ã„ã¨ã“ã‚ãŒå‡ºãªã„ã¨æ„Ÿã˜ãŸã‹ã‚‰ã§ã™ã€‚

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œã‚Œã‚Œã°ã€ã‚°ãƒ©ãƒ•åŒ–ã‚„é›†è¨ˆãªã©ã§åˆ©ç”¨ä¾¡å€¤ã¯ã‚ã‚Šãã†ã§ã™ãŒã€ãƒ—ãƒªã‚¶ãƒ³ã‚¿ãƒ¼ã®ç”»é¢ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ pyscript ã‚’æ›¸ãè¾›ã‹ã£ãŸã§ã™(æ‹¡å¼µ HTML ã ã¨å…¨ãƒšãƒ¼ã‚¸ã«å‡ºã¦ã—ã¾ã†)ã€‚

- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å……å®Ÿã‚’æœŸå¾…ã—ãŸã„

â†“ ã®ã‚ˆã†ãªè¨˜è¿°ãŒã‚ã‚Šã¾ã™ãŒ

> These elements have been deprecated, we suggest that you use native elements and attach the respective py- attribute. For example for <py-button> you can write <button py-click="function()">

https://docs.pyscript.net/latest/tutorials/getting-started.html#visual-component-tags

å®Ÿéš›ã‚„ã£ã¦ã¿ãŸã¨ã“ã‚ã€py-click ã‚’ã™ã‚‹ã«ã¯ id å±æ€§ã‚’ä»˜ã‘ãªã„ã¨ã„ã‘ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã“ã®ã‚ãŸã‚Šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä¸è¶³ã—ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¾ã—ãŸã€‚
(é–‹ç™ºé€”ä¸­ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãªã®ã¯åˆ†ã‹ã£ã¦ã¾ã™ãŒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æƒãˆã¦æ¬²ã—ã„)
